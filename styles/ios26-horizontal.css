/*
 * iOS 26 Horizontal Battery Style
 *
 * Based on Android 16 v2 with:
 * - Gap between body and nub (same size as border)
 * - Nub color: rgba(255, 255, 255, 0.3)
 */

/* Hide original SVG battery - use visibility:hidden so :has() can still detect children */
[class*="_3XySI"] svg,
[class*="_3XySI"] > svg,
[class*="_3XySI"] canvas {
    visibility: hidden !important;
    position: absolute !important;
    pointer-events: none !important;
}

/* Main battery container */
[class*="_3XySI"] {
    position: relative !important;
    width: 22px !important;
    height: 14px !important;
    background: transparent !important;
    border: 1.5px solid var(--mbt-border-color, #FFFFFF) !important;
    border-radius: 2.5px !important;
    display: flex !important;
    align-items: center !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    margin-right: 2px !important;
    box-shadow: none !important;
    overflow: visible !important;
}

/* Battery nub - with gap (1.5px border + 1.5px gap = 3px from edge, then 1.5px more = -4.5px) */
[class*="_3XySI"]::after {
    content: '' !important;
    position: absolute !important;
    right: -4px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    width: 2px !important;
    height: 6px !important;
    background: var(--mbt-tip-color, var(--mbt-border-color, #FFFFFF)) !important;
    border-radius: 0 1px 1px 0 !important;
}

/* Battery fill - 1px inset from border */
[class*="_3XySI"]::before {
    content: '' !important;
    position: absolute !important;
    left: 1px !important;
    top: 1px !important;
    bottom: 1px !important;
    z-index: 1 !important;
    width: calc(85% - 2px) !important;
    background: var(--mbt-fill-color, #FFFFFF) !important;
    border-radius: 1.5px !important;
    transition: width 0.3s ease, background 0.3s ease !important;
}

/* Charging state - green fill with lightning bolt */

[class*="_3XySI"].charging,
[class*="_3XySI"][class*="charging"],
[class*="_3XySI"][class*="Charging"] {
    border-color: var(--mbt-charging-color, #34c759) !important;
}


[class*="_3XySI"].charging::before,
[class*="_3XySI"][class*="charging"]::before,
[class*="_3XySI"][class*="Charging"]::before,
[class*="_3XySI"]:has([d="M16 20L21 11V16H26L21 25V20H16Z"])::before {
    background: var(--mbt-charging-color, #34c759) !important;
    width: calc(100% - 2px) !important;
}


[class*="_3XySI"].charging::after,
[class*="_3XySI"][class*="charging"]::after,
[class*="_3XySI"][class*="Charging"]::after {
    /* Lightning bolt using clip-path */
    right: 50% !important;
    top: 50% !important;
    transform: translate(50%, -50%) !important;
    width: 10px !important;
    height: 12px !important;
    background: #FFFFFF !important;
    border-radius: 0 !important;
    z-index: 10 !important;
    clip-path: polygon(
        60% 0%,
        20% 45%,
        45% 45%,
        40% 100%,
        80% 50%,
        55% 50%
    ) !important;
}

/* Low battery - orange */
[class*="_3XySI"].low::before,
[class*="_3XySI"][class*="low"]::before {
    background: #ff9800 !important;
    width: calc(20% - 2px) !important;
}
[class*="_3XySI"].low,
[class*="_3XySI"][class*="low"] {
    border-color: #ff9800 !important;
}

/* Critical battery - red with pulse */
[class*="_3XySI"].critical::before,
[class*="_3XySI"][class*="critical"]::before {
    background: #f44336 !important;
    animation: mbt-critical-pulse 1s ease-in-out infinite !important;
}
[class*="_3XySI"].critical,
[class*="_3XySI"][class*="critical"] {
    border-color: #f44336 !important;
}

/* Full battery */
[class*="_3XySI"].full::before,
[class*="_3XySI"][class*="full"]::before {
    width: calc(100% - 2px) !important;
}

@keyframes mbt-critical-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
