/*
 * Android 16 Horizontal Battery Style
 *
 * Material You design with pill shape:
 * ╭──────────────╮
 * │ ████████░░░░ ├╮
 * ╰──────────────╯╯
 *
 * Features:
 * - Pill-shaped container
 * - Material You aesthetics
 * - Clean minimal design
 */

/* Hide original SVG battery - use visibility:hidden so :has() can still detect children */
[class*="_3XySI"] svg,
[class*="_3XySI"] > svg,
[class*="_3XySI"] canvas {
    visibility: hidden !important;
    position: absolute !important;
    pointer-events: none !important;
}

/* Main battery container - Android 16 horizontal style */
/* Canvas: 24x14 (12:7 ratio ~1.71:1), scaled to 20x12 */
[class*="_3XySI"] {
    position: relative !important;
    width: 22px !important;
    height: 14px !important;
    background: rgba(255, 255, 255, 0.3) !important;
    border: none !important;

    /* Rounded rectangle - more pill-like */
    border-radius: 3px !important;

    display: flex !important;
    align-items: center !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    margin-right: 4px !important;

    /* Clean look */
    box-shadow: none !important;
    overflow: visible !important;
}

/* Battery tip - right side, 0.25px gap */
[class*="_3XySI"]::after {
    content: '' !important;
    position: absolute !important;
    right: -2.5px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    width: 1.5px !important;
    height: 6.5px !important;
    background: rgba(255, 255, 255, 0.3) !important;
    border-radius: 0 1.5px 1.5px 0 !important;
    opacity: 1 !important;
}

/* Battery fill level - fills from left to right */
[class*="_3XySI"]::before {
    content: '' !important;
    position: absolute !important;
    left: 0.01px !important;
    top: 0.01px !important;
    bottom: 0.01px !important;
    z-index: 1 !important;

    /* Default 75% fill */
    width: 75% !important;
    max-width: calc(100% - 0.02px) !important;

    /* Fill color from variable */
    background: var(--mbt-fill-color, #ffffff) !important;

    /* Match container rounding on left */
    border-radius: 2.9px !important;

    transition: width var(--mbt-transition-speed) var(--mbt-transition-easing),
                background var(--mbt-transition-speed) var(--mbt-transition-easing) !important;
}

/* Low battery - Android uses orange */
[class*="_3XySI"].low::before,
[class*="_3XySI"][class*="low"]::before {
    background: #f9a825 !important;
    width: calc(20% - 2px) !important;
}

/* Critical battery */
[class*="_3XySI"].critical::before,
[class*="_3XySI"][class*="critical"]::before {
    background: #d32f2f !important;
    animation: mbt-charging-pulse 1s ease-in-out infinite !important;
}

/* Charging state - detect via SVG fill color or .charging class */

[class*="_3XySI"].charging::before,
[class*="_3XySI"][class*="charging"]::before,
[class*="_3XySI"][class*="Charging"]::before {
    background: var(--mbt-charging-color, var(--mbt-android-accent, #4caf50)) !important;
    animation: mbt-charging-pulse var(--mbt-pulse-duration) ease-in-out infinite !important;
}

/* Battery saver mode */
[class*="_3XySI"].saver::before,
[class*="_3XySI"][class*="saver"]::before {
    background: #ff6f00 !important;
}

/* Full battery */
[class*="_3XySI"].full::before,
[class*="_3XySI"][class*="full"]::before {
    width: calc(100% - 2px) !important;
    background: var(--mbt-fill-color, #ffffff) !important;
}
